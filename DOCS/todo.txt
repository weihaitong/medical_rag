1、UI 增加界面 #完成
2、历史，每个用户独立的查询历史，为了防止token过于庞大，可以保留最近的K个历史 # 非个人对话模式，无需考虑历史

4、日志：方便审查、排障。日志日志文件 + 按天/大小轮转RotatingFileHandler

5、模型，现在有查询模型、重写模型、重排模型
    #当前模型在本地个人电脑上运行，后需要更换为大模型提高效率
6、重写查询需要怎么做？
  #后期生成部署使用稍大模型检验是否理解prompt，现在0.5B的本地模型理解力差
7、访问远程LLM服务
8、cuda、mps or cpu？#完成
9、向量数据库每次都会重建？
   #1.10版本路径下只有sqllite是正确的。不同的版本不同。
10、如何判断rag的推理是否正确？
11、独立的生成向量数据库的功能。
12、输出多个重复的答案或对话，需要检查、去重
13、面向对象化的改造
14、main函数中，执行时出现等待屏幕输入后打印好多本应该不存在的文字。
15、图数据库、混合检索
    #添加完成
16、192.168.10.138:7474 neo4j Neo4j9527#用作记录使用
17、增加医学实体识别
    #增加医学实体识别lixin12345
18、病历应该写入哪个库？向量数据库还是图数据库
19、资料现在有三种：1、html 2、access 3、mysql
    #1、希望给出文本或者pdf格式，因为本地没法打开
    #2、需要导出到excel导出到导出为 CSV 文件
    #3、迁移数据
-----------------------------
先用成熟方案：
1、医疗百科、指南等命名实体识别
2、推断出实体之间的关系
--------------------------
1、html是否有用？如何切分？生产模型选型？
2、mysql审核，

--------上下文工程
上下文污染，幻觉、矛盾等

todo：
1、术语归一化。医生写“必理通”，系统要转成“对乙酰氨基酚”，否则检索不到说明书。
2、原子查询并行执行。调优 ok
3、向量数据库表格处理
4、
--------元旦给出DEMO
1、演示整个流程**完成
2、给出如何更准确的建议。如何更准确的指标。##完成

---------
faiss - cosine 相似度
稀疏检索 密集检索。融合检索 BM25分
召回率 MRR nDCG，Recall、MRR 和 nDCG 是用来评估 检索器（Retriever） 性能的三大核心指标。
1. 召回率 (Recall) —— “有没有找到？”
2.MRR (Mean Reciprocal Rank, 平均倒数排名) —— “答案是不是在最前面？”决定了 RAG 系统回答问题的响应效率和准确性（不仅要找到，还要放在第一位）
3.nDCG (normalized Discounted Cumulative Gain, 归一化折损累计增益) —— “整体排序是不是最合理的？”越相关的文档，应该排得越靠前。
先保 Recall（先得找到答案，否则一切免谈）。
再看 MRR（尽量把答案往前提，方便 LLM 理解）。
最后看 nDCG（精细化调优，处理复杂多文档场景）。

开启稀疏矩阵***
-------
1、增加配伍禁忌 完成。
2、不同的资料如何匹配返回？ #根据分数
3、每条子查询中的信息多是否合适？
4、deepseek engram是否可以应用到RAG


5、今天很是不高兴
